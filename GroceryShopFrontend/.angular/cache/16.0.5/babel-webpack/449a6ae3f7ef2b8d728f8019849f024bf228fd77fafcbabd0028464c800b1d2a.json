{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass AuthService {\n  constructor(http) {\n    this.http = http;\n    this.currentUser = new BehaviorSubject(null);\n    this.isLoggedIn = false;\n    this.menuType = \"Default\";\n    this.jwtHelpherSerivice = new JwtHelperService();\n    this.baseUrl = 'https://localhost:44395';\n  }\n  registerUser(user) {\n    return this.http.post(this.baseUrl + '/CreateUser', {\n      FirstName: user[0],\n      LastName: user[1],\n      Email: user[2],\n      Mobile: user[3],\n      Role: user[4],\n      Password: user[5]\n    }, {\n      responseType: \"text\"\n    });\n  }\n  LoginUser(user) {\n    return this.http.post(this.baseUrl + '/login', {\n      Email: user[0],\n      Password: user[1]\n    }, {\n      responseType: \"text\"\n    });\n  }\n  setToken(token) {\n    localStorage.setItem(\"access_token\", token);\n    this.loadCurrentUser();\n  }\n  loadCurrentUser() {\n    const token = localStorage.getItem(\"access_token\");\n    const userInfo = token != null ? this.jwtHelpherSerivice.decodeToken(token) : null;\n    const data = userInfo ? {\n      id: userInfo.id,\n      firstname: userInfo.firstname,\n      lastname: userInfo.lastname,\n      email: userInfo.email,\n      mobile: userInfo.mobile,\n      role: userInfo.role\n    } : null;\n    this.currentUser.next(data);\n    console.log(userInfo);\n    this.menuType = userInfo.role;\n    console.log(this.menuType);\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});\nexport { AuthService };","map":{"version":3,"names":["JwtHelperService","BehaviorSubject","AuthService","constructor","http","currentUser","isLoggedIn","menuType","jwtHelpherSerivice","baseUrl","registerUser","user","post","FirstName","LastName","Email","Mobile","Role","Password","responseType","LoginUser","setToken","token","localStorage","setItem","loadCurrentUser","getItem","userInfo","decodeToken","data","id","firstname","lastname","email","mobile","role","next","console","log","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\anoopkumar02\\Desktop\\Nagarro Assignment\\ExitProject Pratice\\PracticeProject2\\GroceryShopFrontend\\src\\app\\Component\\Services\\auth.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n  currentUser : BehaviorSubject<any> = new BehaviorSubject(null);\n  isLoggedIn: boolean = false;\n  menuType: string= \"Default\";\n  \n  jwtHelpherSerivice = new JwtHelperService();\n\n\n  constructor(private http: HttpClient) { }\n  \n  baseUrl = 'https://localhost:44395'\n  registerUser(user:any){\n   return  this.http.post(this.baseUrl+'/CreateUser',\n   {\n       FirstName: user[0],\n       LastName: user[1],\n       Email: user[2],\n       Mobile: user[3],\n       Role:user[4],\n       Password: user[5],\n\n   }, {\n       responseType:\"text\" });\n  }\n\n  LoginUser(user:any){\n    return this.http.post(this.baseUrl +'/login',\n    {\n        Email:user[0],\n        Password:user[1]\n    }, {responseType:\"text\"}\n  )};\n\n  setToken(token :string){\n    localStorage.setItem(\"access_token\", token);\n    this.loadCurrentUser();\n  }\n\n \n\n \n  \n  loadCurrentUser(){\n    const token = localStorage.getItem(\"access_token\");\n    const userInfo = token !=null ? this.jwtHelpherSerivice.decodeToken(token):null;\n   const data = userInfo ? \n   {\n        id:userInfo.id,\n        firstname:userInfo.firstname,\n        lastname:userInfo.lastname,\n        email:userInfo.email,\n        mobile:userInfo.mobile,\n        role:userInfo.role,\n   } : null;\n\n   this.currentUser.next(data);\n   \n    console.log(userInfo);\n    this.menuType = userInfo.role;\n    console.log(this.menuType);\n  }\n}\n"],"mappings":"AAEA,SAASA,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,eAAe,QAAQ,MAAM;;;AAEtC,MAGaC,WAAW;EAStBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAPxB,KAAAC,WAAW,GAA0B,IAAIJ,eAAe,CAAC,IAAI,CAAC;IAC9D,KAAAK,UAAU,GAAY,KAAK;IAC3B,KAAAC,QAAQ,GAAU,SAAS;IAE3B,KAAAC,kBAAkB,GAAG,IAAIR,gBAAgB,EAAE;IAK3C,KAAAS,OAAO,GAAG,yBAAyB;EAFK;EAGxCC,YAAYA,CAACC,IAAQ;IACpB,OAAQ,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACH,OAAO,GAAC,aAAa,EACjD;MACII,SAAS,EAAEF,IAAI,CAAC,CAAC,CAAC;MAClBG,QAAQ,EAAEH,IAAI,CAAC,CAAC,CAAC;MACjBI,KAAK,EAAEJ,IAAI,CAAC,CAAC,CAAC;MACdK,MAAM,EAAEL,IAAI,CAAC,CAAC,CAAC;MACfM,IAAI,EAACN,IAAI,CAAC,CAAC,CAAC;MACZO,QAAQ,EAAEP,IAAI,CAAC,CAAC;KAEnB,EAAE;MACCQ,YAAY,EAAC;KAAQ,CAAC;EAC3B;EAEAC,SAASA,CAACT,IAAQ;IAChB,OAAO,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACH,OAAO,GAAE,QAAQ,EAC5C;MACIM,KAAK,EAACJ,IAAI,CAAC,CAAC,CAAC;MACbO,QAAQ,EAACP,IAAI,CAAC,CAAC;KAClB,EAAE;MAACQ,YAAY,EAAC;IAAM,CAAC,CACzB;EAAA;EAEDE,QAAQA,CAACC,KAAa;IACpBC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,KAAK,CAAC;IAC3C,IAAI,CAACG,eAAe,EAAE;EACxB;EAMAA,eAAeA,CAAA;IACb,MAAMH,KAAK,GAAGC,YAAY,CAACG,OAAO,CAAC,cAAc,CAAC;IAClD,MAAMC,QAAQ,GAAGL,KAAK,IAAG,IAAI,GAAG,IAAI,CAACd,kBAAkB,CAACoB,WAAW,CAACN,KAAK,CAAC,GAAC,IAAI;IAChF,MAAMO,IAAI,GAAGF,QAAQ,GACrB;MACKG,EAAE,EAACH,QAAQ,CAACG,EAAE;MACdC,SAAS,EAACJ,QAAQ,CAACI,SAAS;MAC5BC,QAAQ,EAACL,QAAQ,CAACK,QAAQ;MAC1BC,KAAK,EAACN,QAAQ,CAACM,KAAK;MACpBC,MAAM,EAACP,QAAQ,CAACO,MAAM;MACtBC,IAAI,EAACR,QAAQ,CAACQ;KAClB,GAAG,IAAI;IAER,IAAI,CAAC9B,WAAW,CAAC+B,IAAI,CAACP,IAAI,CAAC;IAE1BQ,OAAO,CAACC,GAAG,CAACX,QAAQ,CAAC;IACrB,IAAI,CAACpB,QAAQ,GAAGoB,QAAQ,CAACQ,IAAI;IAC7BE,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC/B,QAAQ,CAAC;EAC5B;;AA7DWL,WAAW,C;mBAAXA,WAAW,EAAAqC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXxC,WAAW,C;SAAXA,WAAW;EAAAyC,OAAA,EAAXzC,WAAW,CAAA0C,IAAA;EAAAC,UAAA,EAFV;AAAM;SAEP3C,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}